FROM redis:7-alpine

# Optional: copy a redis.conf if you provide one alongside this Dockerfile
# COPY ./redis.conf /usr/local/etc/redis/redis.conf

EXPOSE 6379

# Basic healthcheck: ensure redis responds to PING
HEALTHCHECK --interval=30s --timeout=3s --start-period=10s --retries=5 \
  CMD redis-cli ping || exit 1

# Default command (AOF enabled). If you provide a config file, replace with:
# CMD ["redis-server", "/usr/local/etc/redis/redis.conf"]
CMD ["redis-server", "--appendonly", "yes"]
